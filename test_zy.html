<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>xxx</title>

    <script src="js/jquery-1.7.1.min.js" type="text/javascript"></script>
    <script src="js/jquery.tmpl.min.js" type="text/javascript"></script>
    <script src="./clipboard.min.js" ></script>
    <script type="text/javascript">

        $(function () {
            var iframe = document.createElement('iframe');
            iframe.setAttribute('id', 'toApp');
            iframe.setAttribute('style', 'display:none');
            document.body.appendChild(iframe);


            var clipboard = new Clipboard('.btn');

            clipboard.on('success', function(e) {
                console.info('Action:', e.action);
                console.info('Text:', e.text);
                console.info('Trigger:', e.trigger);

                e.clearSelection();
            });

            clipboard.on('error', function(e) {
                console.error('Action:', e.action);
                console.error('Trigger:', e.trigger);
            });


            var url = location.search; //获取url中"?"符后的字串
            var str = "";
            if (url.indexOf("?") != -1) {
                str = url.substr(1);
                console.log(str);
            }

            $(".btn").attr("data-clipboard-text", "zymkapp://sharecomic?"+str);

        });

        function comicshare() {


            var url = location.search; //获取url中"?"符后的字串
            var str = "";
            if (url.indexOf("?") != -1) {
                 str = url.substr(1);
                console.log(str);
            }

            $("#toApp").attr("src", "zymkapp://sharecomic?"+str);

        }

        function getshowuser() {
            $("#toApp").attr("src", "zymkapp://getuser?callback=showuser");
        }

        function closepage() {
            $("#toApp").attr("src", "zymkapp://app?callback=closepage");
        }


        function fullscreen() {
            $("#toApp").attr("src", "zymkapp://app?callback=fullscreen");
        }

        function normalscreen() {
            $("#toApp").attr("src", "zymkapp://app?callback=normalscreen");
        }


        function dir() {
            $("#toApp").attr("src", "zymkapp://goto?page=dir&comic_id=1&chapter_id=106579");
        }

        function dirH5() {
            $("#toApp").attr("src", "zymkapp://goto?page=dir&comic_id=2872&chapter_id=156880");
        }


        function communitycircle() {
            $("#toApp").attr("src", "zymkapp://goto?page=communitycircle&star_id=1");
        }

        function communityarticle() {
            $("#toApp").attr("src", "zymkapp://goto?page=communityarticle&satellite_id=164702&star_id=1");
        }


        function saveuser(data) {

            alert(data.uid + "  " + data.name);
        }

        function showuser(data) {
            var last = JSON.stringify(data);
            alert(last);
        }


        function share() {
            $("#toApp").attr("src", "zymkapp://share?title=hello&link=http%3A%2F%2Fwww.baidu.com&content=%E5%88%86%E4%BA%AB%E6%96%87%E5%AD%97&image=http%3A%2F%2Fwww.kanman.com%2Fstatic%2Fkanman_logo.png&callback=sharecallback");
        }

        function refreshUserInfo() {
            $("#toApp").attr("src", "zymkapp://refreshUserInfo");
        }
        
        function sharecallback() {
            alert( "分享到成功!");
        }

        function webtoapp() {
            $("#toApp").attr("src", "zymkapp://goto?page=web&url=https%3A%2F%2Fcanyinghao2.github.io%2Fmanhua%2Ftest_zy.html");
        }
        function webtocomickm() {
            $("#toApp").attr("src", "tkanmanapp://goto?page=web&url=http%3A%2F%2Freaddemo.321mh.com%2F%3Fcomic_id%3D3%26chapter_id%3D3259%26key%3DA03A6075EE48FB1EDDB7DC3CE5E39253");
        } function webtocomiczy() {
            $("#toApp").attr("src", "zymkapp://goto?page=web&url=http%3A%2F%2Freaddemo.321mh.com%2F%3Fcomic_id%3d3%26chapter_id%3d3259%26key%3dA03A6075EE48FB1EDDB7DC3CE5E39253");
        }

        function buySuccess(type) {
            alert( "购买成功!"+type);
        }

        function buyInApp() {
            $("#toApp").attr("src", "zymkapp://buyInApp?id=cn.zymk.comic.MKWeekly.vip13&phone=15609070027&callback=buySuccess");
        }

        function login() {
            $("#toApp").attr("src", "zymkapp://goto?page=login");
        }

    </script>
</head>
<body>


<a class="btn" href="javascript:webtoapp()" >app内打开此页面</a><br/>
<a class="btn" href="javascript:webtocomickm()" >app内打开漫画h5 km</a><br/>
<a class="btn" href="javascript:webtocomiczy()" >app内打开漫画h5 zy</a><br/>
<a class="btn" href="javascript:getshowuser()" >获取用户信息</a><br/>
<a class="btn" href="javascript:share()" > 分享</a><br/><br/>
<a class="btn" href="javascript:refreshUserInfo()" > 刷新用户信息</a><br/><br/>
<a class="btn" href="javascript:buyInApp()" > 调起内购</a><br/><br/>
<a class="btn" href="javascript:login()" > 跳转登录</a><br/><br/>


<a class="btn" href="https://www.zymk.cn/2742/175140.html" > web端阅读页tps://www.zymk.cn/2742/175140.html</a><br/>
<a class="btn" href="https://www.zymk.cn/2742/" > web端详情页https://www.zymk.cn/2742/</a><br/>
<a class="btn" href="javascript:communitycircle()"> 圈子详情页</a><br/>
<a class="btn" href="javascript:communityarticle()"> 帖子详情页</a><br/>
<a class="btn" href="javascript:dir()" > 打开阅读页</a><br/>
<a class="btn" href="javascript:dirH5()" > 打开H5阅读页</a><br/>
<a class="btn" href="https://apps.apple.com/cn/app/compass-%E6%88%98%E6%96%97%E5%A4%A9%E8%B5%8B%E8%A7%A3%E6%9E%90%E7%B3%BB%E7%BB%9F/id1477817929" >跳转appstore</a><br/>
<a class="btn" href="https://apps.apple.com/cn/app/id1477817929" >跳转appstore</a><br/>
<a class="btn" href="itms-appss://apps.apple.com/cn/app/compass-%E6%88%98%E6%96%97%E5%A4%A9%E8%B5%8B%E8%A7%A3%E6%9E%90%E7%B3%BB%E7%BB%9F/id1477817929" >跳转appstore</a><br/>




</body>
</html>