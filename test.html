<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>xxx</title>

    <script src="js/jquery-1.7.1.min.js" type="text/javascript"></script>
    <script src="js/jquery.tmpl.min.js" type="text/javascript"></script>
    <script src="./clipboard.min.js" ></script>
    <script type="text/javascript">

        $(function () {
            var iframe = document.createElement('iframe');
            iframe.setAttribute('id', 'toApp');
            iframe.setAttribute('style', 'display:none');
            document.body.appendChild(iframe);


            var clipboard = new Clipboard('.btn');

            clipboard.on('success', function(e) {
                console.info('Action:', e.action);
                console.info('Text:', e.text);
                console.info('Trigger:', e.trigger);

                e.clearSelection();
            });

            clipboard.on('error', function(e) {
                console.error('Action:', e.action);
                console.error('Trigger:', e.trigger);
            });


            var url = location.search; //获取url中"?"符后的字串
            var str = "";
            if (url.indexOf("?") != -1) {
                str = url.substr(1);
                console.log(str);
            }

            $(".btn").attr("data-clipboard-text", "tkanmanapp://sharecomic?"+str);

        });

        function comicshare() {


            var url = location.search; //获取url中"?"符后的字串
            var str = "";
            if (url.indexOf("?") != -1) {
                 str = url.substr(1);
                console.log(str);
            }

            $("#toApp").attr("src", "tkanmanapp://sharecomic?"+str);

        }

        function getshowuser() {
            $("#toApp").attr("src", "tkanmanapp://getuser?callback=showuser");
        }

        function closepage() {
            $("#toApp").attr("src", "tkanmanapp://app?callback=closepage");
        }


        function fullscreen() {
            $("#toApp").attr("src", "tkanmanapp://app?callback=fullscreen");
        }

        function normalscreen() {
            $("#toApp").attr("src", "tkanmanapp://app?callback=normalscreen");
        }

        function saveuser(data) {

            alert(data.uid + "  " + data.name);
        }

        function showuser(data) {
            var last = JSON.stringify(data);
            alert(last);
        }


        function share() {
            $("#toApp").attr("src", "tkanmanapp://share?title=hello&link=http%3A%2F%2Fwww.baidu.com&content=%E5%88%86%E4%BA%AB%E6%96%87%E5%AD%97&image=http%3A%2F%2Fwww.kanman.com%2Fstatic%2Fkanman_logo.png&callback=sharecallback");
        }
        
        function sharecallback(shareType) {
            alert( "分享到成功! 类型:"+shareType);
        }

        function webtoapp() {
            $("#toApp").attr("src", "tkanmanapp://goto?page=web&url=https%3A%2F%2Fcanyinghao2.github.io%2Fmanhua%2Ftest.html");
        }


        function gotoComic() {
            $("#toApp").attr("src", "tkanmanapp://goto?page=dir&comic_id=25934");

        }



        function baiduinapp() {
            $("#toApp").attr("src", "tkanmanapp://goto?page=dir&comic_id=25934&inbaidu=ture#Intent;component=com.wbxm.icartoon/.ui.detail.DetailActivity;S.intent_id=25934;end");
        }


        function rigeng() {
            $("#toApp").attr("src", "tkanmanapp://goto?page=web&url=tkanmanapp%3A%2F%2Fgoto%3Fpage%3Dsortlist%26class_id%3D137");
        }
        function classification() {
            $("#toApp").attr("src", "tkanmanapp://goto?page=web&url=tkanmanapp%3A%2F%2Fgoto%3Fpage%3Dclassification");
        }


        function dir() {
            $("#toApp").attr("src", "tkanmanapp://goto?page=dir&comic_id=25933&chapter_id=49872");
        }

        function dirH5() {
            $("#toApp").attr("src", "tkanmanapp://goto?page=dir&comic_id=106499&chapter_id=1549367");
        }


         function getShareConf (){
            return {
                title: 'h5活动页',
                content: 'h5活动页描述',
                image: 'https://www.baidu.com/img/bd_logo1.png',
                url: 'http://www.baidu.com',
                callback:"sharecallback"
            }
        }


    </script>
</head>
<body>


<a class="btn" href="javascript:webtoapp()" >app内打开此页面</a><br/>


<a class="btn" href="javascript:getshowuser()" >获取用户信息</a><br/>
<a class="btn" href="javascript:share()" > 分享</a><br/>
<a class="btn" href="javascript:gotoComic()" > 打开漫画</a><br/>
<a class="btn" href="javascript:baiduinapp()" >百度应用内搜索</a><br/>

<a class="btn" href="javascript:rigeng()" >日更</a><br/>
<a class="btn" href="javascript:classification()" >分类</a><br/>




<a class="btn" href="https://comicsdk.321mh.com/kmh_app/?page=dir&comic_id=25934" > IOS打开漫画</a><br/>
<a class="btn" href="https://comicsdk.321mh.com/kmh_app/" > IOS打开APP</a><br/>


<a class="btn" href="javascript:dir()" > 打开阅读页</a><br/>
<a class="btn" href="javascript:dirH5()" > 打开H5阅读页</a><br/>



</body>
</html>