<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>xxx</title>

    <script src="js/jquery-1.7.1.min.js" type="text/javascript"></script>
    <script src="js/jquery.tmpl.min.js" type="text/javascript"></script>
    <script src="./clipboard.min.js"></script>
    <script type="text/javascript">

        $(function () {
            var iframe = document.createElement('iframe');
            iframe.setAttribute('id', 'toApp');
            iframe.setAttribute('style', 'display:none');
            document.body.appendChild(iframe);


            var clipboard = new Clipboard('.btn');

            clipboard.on('success', function (e) {
                console.info('Action:', e.action);
                console.info('Text:', e.text);
                console.info('Trigger:', e.trigger);

                e.clearSelection();
            });

            clipboard.on('error', function (e) {
                console.error('Action:', e.action);
                console.error('Trigger:', e.trigger);
            });


            var url = location.search; //获取url中"?"符后的字串
            var str = "";
            if (url.indexOf("?") != -1) {
                str = url.substr(1);
                console.log(str);
            }

            $(".btn").attr("data-clipboard-text", "tkanmanapp://sharecomic?" + str);

        });

        function comicshare() {


            var url = location.search; //获取url中"?"符后的字串
            var str = "";
            if (url.indexOf("?") != -1) {
                str = url.substr(1);
                console.log(str);
            }

            $("#toApp").attr("src", "tkanmanapp://sharecomic?" + str);

        }

        function getshowuser() {
            $("#toApp").attr("src", "tkanmanapp://getuser?callback=showuser");
        }

        function closepage() {
            $("#toApp").attr("src", "tkanmanapp://app?callback=closepage");
        }


        function fullscreen() {
            $("#toApp").attr("src", "tkanmanapp://app?callback=fullscreen");
        }

        function normalscreen() {
            $("#toApp").attr("src", "tkanmanapp://app?callback=normalscreen");
        }

        function nopull() {
            $("#toApp").attr("src", "tkanmanapp://app?callback=nopull");
        }

        function nofloatbutton() {
            $("#toApp").attr("src", "tkanmanapp://app?callback=nofloatbutton");
        }

        function saveuser(data) {

            alert(data.uid + "  " + data.name);
        }

        function showuser(data) {
            var last = JSON.stringify(data);
            alert(last);
        }


        function share() {
            $("#toApp").attr("src", "tkanmanapp://share?title=hello&link=http%3A%2F%2Fwww.baidu.com&content=%E5%88%86%E4%BA%AB%E6%96%87%E5%AD%97&image=http%3A%2F%2Fwww.kanman.com%2Fstatic%2Fkanman_logo.png&callback=sharecallback");
        }

        function pictureshare() {
            $("#toApp").attr("src", "tkanmanapp://picture?qr=https%3A%2F%2Fwww.kanman.com%2F25934%2Fdpcq_1h.html&image=http%3A%2F%2Fmhpic.jumanhua.com%2Fcomic%2FD%2F%25E6%2596%2597%25E7%25A0%25B4%25E8%258B%258D%25E7%25A9%25B9%25E6%258B%2586%25E5%2588%2586%25E7%2589%2588%2F722%25E8%25AF%259DGQ%2F1.jpg-kmh.middle.webp&title=%E6%96%97%E7%A0%B4%E8%8B%8D%E7%A9%B9&content=%E7%AC%AC%E4%B8%80%E8%AF%9D&hint=%E9%95%BF%E6%8C%89%E8%AF%86%E5%88%AB%E4%BA%8C%E7%BB%B4%E7%A0%81&callback=picturecallback");
        }

        function sharecallback(shareType) {
            alert("分享到成功! 类型:" + shareType);
        }

        function picturecallback(shareType) {
            alert("分享二维码成功! 类型:" + shareType);
        }

        function webtoapp() {
            $("#toApp").attr("src", "tkanmanapp://goto?page=web&url=https%3A%2F%2Fcanyinghao2.github.io%2Fmanhua%2Ftest.html");
        }

        function webtoappmht() {
            $("#toApp").attr("src", "tmanhuataiapp://goto?page=web&url=https%3A%2F%2Fcanyinghao2.github.io%2Fmanhua%2Ftest.html");
        }


        function gotoComic() {
            $("#toApp").attr("src", "tkanmanapp://goto?page=dir&comic_id=25934");

        }


        function baiduinapp() {
            $("#toApp").attr("src", "tkanmanapp://goto?page=dir&comic_id=25934&inbaidu=ture#Intent;component=com.wbxm.icartoon/.ui.detail.DetailActivity;S.intent_id=25934;end");
        }


        function rigeng() {
            $("#toApp").attr("src", "tkanmanapp://goto?page=sortlist&class_id=137");
        }
        function classification() {
            $("#toApp").attr("src", "tkanmanapp://goto?page=classification");
        }


        function dir() {
            $("#toApp").attr("src", "tkanmanapp://goto?page=dir&comic_id=25933&chapter_id=49872");
        }

        function dirH5() {
            $("#toApp").attr("src", "tkanmanapp://goto?page=dir&comic_id=106499&chapter_id=1549367");
        }


        function novelGril() {
            $("#toApp").attr("src", "tkanmanapp://goto?page=novel&tab=1");
        }

        function novelDetail() {
            $("#toApp").attr("src", "tkanmanapp://goto?page=noveldetail&novel_id=50001832");
        }

        function novelBook() {
            $("#toApp").attr("src", "tkanmanapp://goto?page=novelbook&novel_bookid=102");
        }

        function novelrank() {
            $("#toApp").attr("src", "tkanmanapp://goto?page=novelrank");
        }

        function novelclassify() {
            $("#toApp").attr("src", "tkanmanapp://goto?page=novelclassify");
        }


        function getShareConf() {
            return {
                title: 'h5活动页',
                content: 'h5活动页描述',
                image: 'https://www.baidu.com/img/bd_logo1.png',
                url: 'http://www.baidu.com',
                callback: "sharecallback"
            }
        }


    </script>
</head>
<body>


<a class="btn" href="javascript:webtoapp()">看漫app内打开此页面</a><br/><br/>
<a class="btn" href="javascript:webtoappmht()">漫画台app内打开此页面</a><br/><br/>

<a class="btn" href="javascript:fullscreen()">全屏</a><br/>
<a class="btn" href="javascript:normalscreen()">非全屏</a><br/>
<a class="btn" href="javascript:closepage()">退出</a><br/><br/>
<a class="btn" href="javascript:nopull()">不允许下拉</a><br/>
<a class="btn" href="javascript:nofloatbutton()">不显示浮动按钮</a><br/><br/>


<a class="btn" href="javascript:getshowuser()">获取用户信息</a><br/>
<a class="btn" href="javascript:share()"> 分享</a><br/>
<a class="btn" href="javascript:pictureshare()"> 分享二维码</a><br/>
<a class="btn" href="javascript:gotoComic()"> 打开漫画</a><br/>



<a class="btn" href="javascript:rigeng()">日更</a><br/>
<a class="btn" href="javascript:classification()">分类</a><br/>
<a class="btn" href="javascript:dir()"> 打开阅读页</a><br/>
<a class="btn" href="javascript:dirH5()"> 打开H5阅读页</a><br/><br/>


<a class="btn" href="javascript:novelGril()"> 小说女生频道</a><br/>
<a class="btn" href="javascript:novelDetail()"> 小说详情页</a><br/>
<a class="btn" href="javascript:novelBook()"> 小说书单页</a><br/>
<a class="btn" href="javascript:novelclassify()"> 小说分类</a><br/>
<a class="btn" href="javascript:novelrank()"> 小说排行榜</a><br/>


</body>
</html>